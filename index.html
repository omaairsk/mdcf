<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MEDICAL PHARMACY | Precision Financial Suite</title>
    <!-- Core Frameworks -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Supabase JS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        
        :root {
            --glass: rgba(15, 23, 42, 0.85);
            --border: rgba(255, 255, 255, 0.1);
        }

        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            overflow-x: hidden;
            background-color: #020617;
            color: #f8fafc;
            margin: 0;
            padding: 0;
            width: 100vw;
            min-height: 100vh;
        }

        #canvas-container { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            z-index: -1; 
            pointer-events: none;
            opacity: 0.5;
        }

        .glass-card { 
            background: var(--glass); 
            backdrop-filter: blur(24px); 
            border: 1px solid var(--border); 
            border-radius: 1.5rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .glass-card:hover {
            border-color: rgba(56, 189, 248, 0.3);
            transform: translateY(-4px);
        }

        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 10px; }

        .center-layout {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
        }

        @media print {
            .no-print { display: none !important; }
            body { background: white !important; color: black !important; }
            .glass-card { border: 1px solid #ddd !important; background: white !important; color: black !important; box-shadow: none !important; backdrop-filter: none !important; }
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(56, 189, 248, 0.1);
            border-left-color: #38bdf8;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <!-- 
        SUPABASE SCHEMA REPAIR (Run this in your Supabase SQL Editor):

        -- 1. DROP EXISTING TABLE IF IT HAS WRONG TYPES (Fixes Error 22P02)
        drop table if exists pharmacy_records;
        
        -- 2. CREATE TABLE WITH SIMPLE TEXT DATE
        create table pharmacy_records (
            id bigint primary key generated always as identity,
            date text not null, 
            sales numeric default 0,
            expense numeric default 0,
            refund numeric default 0,
            dues numeric default 0,
            bank_deposit numeric default 0,
            day_pl numeric default 0,
            cash_hand numeric default 0,
            created_at timestamptz default now()
        );

        -- 3. SECURITY POLICIES
        alter table pharmacy_records enable row level security;
        create policy "Public Access Policy" on pharmacy_records for all using (true) with check (true);

        -- 4. ENABLE REALTIME
        alter publication supabase_realtime add table pharmacy_records;
    -->
    <div id="canvas-container"></div>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef, useCallback } = React;

        // --- Supabase Config ---
        const SUPABASE_URL = "https://uoajxfqciabzlpiqxvup.supabase.co";
        const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVvYWp4ZnFjaWFiemxwaXF4dnVwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA2NTYxMDQsImV4cCI6MjA4NjIzMjEwNH0.CQalWc4mIWsVPJLt-Zgd2i80fZtlfGPW0jpVbb8GBso";
        const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // --- 3D Background Logic ---
        const ThreeBackground = () => {
            useEffect(() => {
                const currentContainer = document.getElementById('canvas-container');
                if (!currentContainer) return;

                const scene = new THREE.Scene();
                const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                currentContainer.appendChild(renderer.domElement);

                const light = new THREE.PointLight(0x0ea5e9, 2);
                light.position.set(20, 20, 20);
                scene.add(new THREE.AmbientLight(0xffffff, 0.6), light);

                const group = new THREE.Group();
                const geometry = new THREE.IcosahedronGeometry(0.5, 0);
                const material = new THREE.MeshPhongMaterial({ color: 0x38bdf8, wireframe: true });
                for (let i = 0; i < 40; i++) {
                    const mesh = new THREE.Mesh(geometry, material);
                    mesh.position.set((Math.random() - 0.5) * 60, (Math.random() - 0.5) * 60, (Math.random() - 0.5) * 40);
                    group.add(mesh);
                }
                scene.add(group);

                camera.position.z = 25;
                let mouseX = 0, mouseY = 0;
                const onMove = (e) => {
                    mouseX = (e.clientX - window.innerWidth / 2) * 0.005;
                    mouseY = (e.clientY - window.innerHeight / 2) * 0.005;
                };
                window.addEventListener('mousemove', onMove);

                let animId;
                const animate = () => {
                    animId = requestAnimationFrame(animate);
                    group.rotation.y += 0.001;
                    group.rotation.x += 0.0005;
                    camera.position.x += (mouseX - camera.position.x) * 0.05;
                    camera.position.y += (-mouseY - camera.position.y) * 0.05;
                    camera.lookAt(scene.position);
                    renderer.render(scene, camera);
                };
                animate();

                const onResize = () => {
                    camera.aspect = window.innerWidth / window.innerHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(window.innerWidth, window.innerHeight);
                };
                window.addEventListener('resize', onResize);

                return () => {
                    cancelAnimationFrame(animId);
                    window.removeEventListener('mousemove', onMove);
                    window.removeEventListener('resize', onResize);
                    if (renderer.domElement.parentNode === currentContainer) {
                        currentContainer.removeChild(renderer.domElement);
                    }
                    geometry.dispose();
                    material.dispose();
                    renderer.dispose();
                };
            }, []);
            return null;
        };

        const App = () => {
            const [role, setRole] = useState('staff'); 
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [activeTab, setActiveTab] = useState('dashboard');
            const [records, setRecords] = useState([]);
            const [loading, setLoading] = useState(true);
            const [dbError, setDbError] = useState(null);
            const [accessKey, setAccessKey] = useState('');
            const [isSaving, setIsSaving] = useState(false);

            const staffPass = 'mdc@123';
            const adminPass = 'Fadmin';

            const [formData, setFormData] = useState({
                date: new Date().toISOString().split('T')[0],
                sales: '', expense: '', refund: '', dues: '', bankDeposit: ''
            });

            // Database Handlers
            const fetchRecords = useCallback(async () => {
                const { data, error } = await supabase
                    .from('pharmacy_records')
                    .select('*');
                
                if (error) {
                    setDbError(error.message);
                } else {
                    setDbError(null);
                    const mapped = (data || []).map(r => ({
                        id: r.id,
                        date: String(r.date || ''),
                        sales: Number(r.sales) || 0,
                        expense: Number(r.expense) || 0,
                        refund: Number(r.refund) || 0,
                        dues: Number(r.dues) || 0,
                        bankDeposit: Number(r.bank_deposit) || 0,
                        dayPL: Number(r.day_pl) || 0,
                        cashHand: Number(r.cash_hand) || 0
                    })).sort((a, b) => b.date.localeCompare(a.date));
                    setRecords(mapped);
                }
                setLoading(false);
            }, []);

            useEffect(() => {
                fetchRecords();
                const sub = supabase.channel('realtime_sync').on('postgres_changes', { event: '*', schema: 'public', table: 'pharmacy_records' }, fetchRecords).subscribe();
                return () => supabase.removeChannel(sub);
            }, [fetchRecords]);

            useEffect(() => { if (window.lucide) window.lucide.createIcons(); }, [records, isLoggedIn, activeTab]);

            // Financial Summary Logic
            const stats = useMemo(() => {
                const s = records.reduce((acc, r) => ({
                    sales: acc.sales + r.sales,
                    expense: acc.expense + r.expense,
                    refund: acc.refund + r.refund
                }), { sales: 0, expense: 0, refund: 0 });
                return { ...s, netProfit: s.sales - s.expense - s.refund };
            }, [records]);

            const monthlySummary = useMemo(() => {
                const groups = {};
                records.forEach(r => {
                    const m = r.date ? r.date.substring(0, 7) : 'NA';
                    if (!groups[m]) groups[m] = { m, s: 0, e: 0, p: 0 };
                    groups[m].s += r.sales;
                    groups[m].e += r.expense;
                    groups[m].p += (r.sales - r.expense - r.refund);
                });
                return Object.values(groups).sort((a, b) => b.m.localeCompare(a.m));
            }, [records]);

            const downloadCSV = () => {
                const headers = ["Date", "Sales", "Expense", "Refund", "Dues", "Bank Deposit", "Cash Hand", "Profit"];
                const rows = records.map(r => [r.date, r.sales, r.expense, r.refund, r.dues, r.bankDeposit, r.cashHand, r.dayPL].join(","));
                const csvContent = "data:text/csv;charset=utf-8," + [headers.join(","), ...rows].join("\n");
                const encodedUri = encodeURI(csvContent);
                const link = document.createElement("a");
                link.setAttribute("href", encodedUri);
                link.setAttribute("download", `Pharmacy_Full_Report.csv`);
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            };

            const addRecord = async (e) => {
                if (e) e.preventDefault();
                if (isSaving) return;
                setIsSaving(true);
                const s = Number(formData.sales) || 0;
                const ex = Number(formData.expense) || 0;
                const rf = Number(formData.refund) || 0;
                const d = Number(formData.dues) || 0;
                const b = Number(formData.bankDeposit) || 0;

                const payload = { 
                    date: String(formData.date), 
                    sales: s, 
                    expense: ex, 
                    refund: rf, 
                    dues: d, 
                    bank_deposit: b, 
                    day_pl: s - ex - rf, 
                    cash_hand: s - b - d - rf 
                };

                const { error } = await supabase.from('pharmacy_records').insert([payload]);
                if (error) {
                    alert(`Cloud Error: ${error.message}. Fix date column in Supabase Dashboard.`);
                } else {
                    setFormData({ date: new Date().toISOString().split('T')[0], sales: '', expense: '', refund: '', dues: '', bankDeposit: '' });
                    fetchRecords();
                }
                setIsSaving(false);
            };

            const handleDelete = async (id) => {
                if (role !== 'admin' || !confirm('Permanently delete this record?')) return;
                await supabase.from('pharmacy_records').delete().eq('id', id);
                fetchRecords();
            };

            const handleLoginAttempt = (e) => {
                if (e && e.preventDefault) e.preventDefault();
                const currentPass = accessKey.trim();
                if ((role === 'admin' && currentPass === adminPass) || (role === 'staff' && currentPass === staffPass)) {
                    setIsLoggedIn(true);
                    setAccessKey('');
                } else {
                    alert("Invalid Access Key");
                }
            };

            const fmt = (v) => (Number(v) || 0).toLocaleString('en-IN');

            if (!isLoggedIn) {
                return (
                    <div className="flex items-center justify-center min-h-screen p-6 w-full relative">
                        <ThreeBackground />
                        <div className="glass-card p-10 w-full max-w-md space-y-8 animate-in fade-in zoom-in duration-500">
                            <div className="text-center">
                                <div className="inline-block p-4 bg-sky-500/20 rounded-2xl mb-4 border border-sky-500/30 text-sky-400">
                                    <i data-lucide="shield-check" className="w-12 h-12"></i>
                                </div>
                                <h1 className="text-3xl font-black tracking-tighter text-white uppercase">MEDICAL <span className="text-sky-500">PHARMACY</span></h1>
                                <p className="text-slate-400 text-[10px] mt-2 font-bold tracking-widest uppercase">Admin & Staff Portal</p>
                            </div>
                            <form className="space-y-6" onSubmit={handleLoginAttempt}>
                                <div className="grid grid-cols-2 gap-3">
                                    <button type="button" onClick={() => setRole('staff')} className={`py-4 rounded-xl border transition-all font-bold text-xs uppercase ${role === 'staff' ? 'bg-sky-500/20 border-sky-500 text-sky-400' : 'border-slate-800 text-slate-500'}`}>Staff</button>
                                    <button type="button" onClick={() => setRole('admin')} className={`py-3 rounded-xl border transition-all font-bold text-xs uppercase ${role === 'admin' ? 'bg-indigo-500/20 border-indigo-500 text-indigo-400' : 'border-slate-800 text-slate-500'}`}>Admin</button>
                                </div>
                                <input type="password" value={accessKey} onChange={(e) => setAccessKey(e.target.value)} className="w-full bg-slate-950/80 border border-slate-800 rounded-xl p-4 text-white text-center tracking-widest focus:outline-none focus:ring-2 focus:ring-sky-500/30" placeholder="ENTER ACCESS KEY" />
                                <button type="submit" className="w-full bg-sky-600 hover:bg-sky-500 py-4 rounded-xl font-bold uppercase text-xs tracking-widest shadow-lg transition-all">Authorize Access</button>
                            </form>
                            <p className="text-center text-[10px] text-slate-600 uppercase font-bold tracking-widest">Connected to Supabase Cloud</p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen pb-20">
                    <ThreeBackground />
                    <div className="center-layout pt-6 px-4 no-print">
                        <nav className="glass-card p-4 flex flex-wrap items-center justify-between gap-6 shadow-2xl sticky top-6 z-50">
                            <div className="flex items-center gap-4">
                                <div className={`p-3 rounded-2xl ${role === 'admin' ? 'bg-indigo-600' : 'bg-emerald-600'}`}><i data-lucide="activity" className="w-6 h-6 text-white"></i></div>
                                <div>
                                    <h2 className="font-extrabold text-xl tracking-tighter uppercase leading-none">MEDICAL PHARMACY</h2>
                                    <p className="text-[10px] uppercase font-black text-slate-500 tracking-widest mt-1.5">{role} Portal • Global Sync</p>
                                </div>
                            </div>
                            <div className="flex items-center gap-2 bg-white/5 p-1 rounded-2xl">
                                {['dashboard', 'logs', 'admin'].map(t => (t !== 'admin' || role === 'admin') && <button key={t} onClick={() => setActiveTab(t)} className={`px-6 py-2.5 rounded-xl text-[10px] font-black uppercase transition-all tracking-widest ${activeTab === t ? 'bg-white/10 text-white' : 'text-slate-500 hover:text-slate-300'}`}>{t}</button>)}
                                <button onClick={() => setIsLoggedIn(false)} className="px-4 py-2 text-rose-500 hover:bg-rose-500/10 rounded-xl transition-colors"><i data-lucide="power" className="w-4 h-4"></i></button>
                            </div>
                        </nav>
                    </div>

                    <main className="center-layout px-4 mt-10">
                        {dbError && <div className="mb-6 p-4 bg-rose-500/20 border border-rose-500/30 rounded-xl text-rose-400 text-xs font-bold uppercase tracking-widest animate-pulse">Sync Warning: {dbError}</div>}

                        {loading ? (
                            <div className="flex flex-col items-center justify-center py-20 text-sky-400">
                                <div className="spinner mb-4"></div>
                                <p className="font-bold tracking-widest uppercase text-xs">Synchronizing Terminal...</p>
                            </div>
                        ) : activeTab === 'dashboard' ? (
                            <div className="space-y-10 animate-in fade-in slide-in-from-bottom duration-700">
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                    {[
                                        { l: 'Total Sales', v: stats.sales, c: 'border-emerald-500', i: 'trending-up' },
                                        { l: 'Expenses', v: stats.expense, c: 'border-rose-500', i: 'trending-down' },
                                        { l: 'Refunds', v: stats.refund, c: 'border-amber-500', i: 'refresh-cw' },
                                        { l: 'Net Profit', v: stats.profit, c: 'border-sky-500', i: 'wallet' }
                                    ].map((s, idx) => (
                                        <div key={idx} className={`glass-card p-6 border-l-4 ${s.c} shadow-xl hover:-translate-y-1 transition-all`}>
                                            <p className="text-slate-500 text-[9px] font-black uppercase tracking-widest mb-1">{s.l}</p>
                                            <div className="flex items-end justify-between"><h3 className="text-2xl font-black">₹{fmt(s.v)}</h3><i data-lucide={s.i} className="w-4 h-4 opacity-30"></i></div>
                                        </div>
                                    ))}
                                </div>
                                <div className="grid grid-cols-1 xl:grid-cols-12 gap-10">
                                    <div className="xl:col-span-4 no-print glass-card p-8 border-t-4 border-sky-500 shadow-xl h-fit">
                                        <h4 className="text-sm font-black uppercase tracking-widest mb-8 flex items-center gap-2"><i data-lucide="plus-circle" className="text-sky-400 w-5 h-5"></i> New Entry</h4>
                                        <form onSubmit={addRecord} className="space-y-4">
                                            <input type="date" value={formData.date} onChange={e => setFormData({...formData, date: e.target.value})} className="w-full bg-slate-950/50 border border-slate-800 rounded-xl p-3 text-sm focus:border-sky-500 outline-none" required />
                                            <div className="grid grid-cols-2 gap-4">
                                                <input type="number" placeholder="Sales" value={formData.sales} onChange={e => setFormData({...formData, sales: e.target.value})} className="bg-slate-950/50 border border-slate-800 rounded-xl p-3 text-sm outline-none" />
                                                <input type="number" placeholder="Expense" value={formData.expense} onChange={e => setFormData({...formData, expense: e.target.value})} className="bg-slate-950/50 border border-slate-800 rounded-xl p-3 text-sm outline-none" />
                                            </div>
                                            <div className="grid grid-cols-2 gap-4">
                                                <input type="number" placeholder="Refund" value={formData.refund} onChange={e => setFormData({...formData, refund: e.target.value})} className="bg-slate-950/50 border border-slate-800 rounded-xl p-3 text-sm outline-none" />
                                                <input type="number" placeholder="Dues" value={formData.dues} onChange={e => setFormData({...formData, dues: e.target.value})} className="bg-slate-950/50 border border-slate-800 rounded-xl p-3 text-sm outline-none" />
                                            </div>
                                            <input type="number" placeholder="Bank Deposit" value={formData.bankDeposit} onChange={e => setFormData({...formData, bankDeposit: e.target.value})} className="w-full bg-slate-950/50 border border-slate-800 rounded-xl p-3 text-sm outline-none" />
                                            <button type="submit" disabled={isSaving} className={`w-full bg-sky-600 hover:bg-sky-500 py-4 rounded-xl font-bold uppercase text-[10px] tracking-widest shadow-lg transition-all ${isSaving ? 'opacity-50' : ''}`}>
                                                {isSaving ? 'Syncing...' : 'Submit to Cloud'}
                                            </button>
                                        </form>
                                    </div>
                                    <div className="xl:col-span-8 glass-card p-8 border-t-4 border-indigo-500 shadow-xl overflow-hidden">
                                        <div className="flex justify-between items-center mb-8"><h4 className="text-sm font-black uppercase tracking-tight">Monthly Performance</h4><div className="flex gap-2"><button onClick={downloadCSV} className="p-2 bg-white/5 rounded-lg hover:bg-white/10"><i data-lucide="download" className="w-4 h-4"></i></button><button onClick={() => window.print()} className="p-2 bg-white/5 rounded-lg hover:bg-white/10"><i data-lucide="printer" className="w-4 h-4"></i></button></div></div>
                                        <div className="overflow-x-auto custom-scrollbar">
                                            <table className="w-full text-left">
                                                <thead className="text-[10px] font-black text-slate-500 uppercase tracking-widest border-b border-white/10"><tr><th className="pb-4">Fiscal Month</th><th className="pb-4 text-right">Sales</th><th className="pb-4 text-right">Expense</th><th className="pb-4 text-right">Profit</th></tr></thead>
                                                <tbody className="divide-y divide-white/5">
                                                    {monthlySummary.map(m => (
                                                        <tr key={m.m} className="group hover:bg-white/5">
                                                            <td className="py-6 font-bold tracking-tight text-sm uppercase">{m.m}</td>
                                                            <td className="py-6 text-right text-emerald-400 font-bold text-sm">₹{fmt(m.s)}</td>
                                                            <td className="py-6 text-right text-rose-400 font-bold text-sm">₹{fmt(m.e)}</td>
                                                            <td className={`py-6 text-right font-black text-sm ${m.p >= 0 ? 'text-sky-400' : 'text-rose-500'}`}>₹{fmt(m.p)}</td>
                                                        </tr>
                                                    ))}
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        ) : activeTab === 'logs' ? (
                            <div className="glass-card overflow-hidden shadow-2xl border-t-4 border-emerald-500 animate-in slide-in-from-bottom duration-700">
                                <div className="p-8 border-b border-white/10 flex justify-between items-center bg-white/5">
                                    <h4 className="text-sm font-black uppercase tracking-widest">Global activity Ledger</h4>
                                    <button onClick={downloadCSV} className="px-6 py-2.5 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg">Export Ledger</button>
                                </div>
                                <div className="overflow-x-auto custom-scrollbar">
                                    <table className="w-full text-left text-xs">
                                        <thead className="bg-slate-900/50 text-slate-500 text-[10px] font-black uppercase tracking-widest"><tr><th className="p-6 pl-10">Entry Date</th><th className="p-6 text-right">Sales</th><th className="p-6 text-right">Expense</th><th className="p-6 text-right">Refund</th><th className="p-6 text-right">Banked</th><th className="p-6 text-right">Cash</th><th className="p-6 text-right">P/L</th><th className="p-6 text-center pr-10">Actions</th></tr></thead>
                                        <tbody className="divide-y divide-white/5">
                                            {records.map(r => (
                                                <tr key={r.id} className="hover:bg-white/5 transition-all group">
                                                    <td className="p-6 pl-10 font-bold text-sm">{r.date || '---'}</td>
                                                    <td className="p-6 text-right font-medium">₹{fmt(r.sales)}</td>
                                                    <td className="p-6 text-right text-rose-400/80">₹{fmt(r.expense)}</td>
                                                    <td className="p-6 text-right text-amber-400/80">₹{fmt(r.refund)}</td>
                                                    <td className="p-6 text-right text-sky-400/80 font-bold">₹{fmt(r.bankDeposit)}</td>
                                                    <td className="p-6 text-right font-black text-white">₹{fmt(r.cashHand)}</td>
                                                    <td className={`p-6 text-right font-black ${r.dayPL >= 0 ? 'text-emerald-400' : 'text-rose-500'}`}>₹{fmt(r.dayPL)}</td>
                                                    <td className="p-6 text-center pr-10">{role === 'admin' ? <button onClick={() => handleDelete(r.id)} className="text-slate-600 hover:text-rose-500 transition-all opacity-0 group-hover:opacity-100 p-2 rounded-lg bg-rose-500/5"><i data-lucide="trash-2" className="w-4 h-4"></i></button> : <i data-lucide="lock" className="w-4 h-4 opacity-10 mx-auto"></i>}</td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        ) : activeTab === 'admin' && role === 'admin' ? (
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-10 animate-in zoom-in duration-500">
                                <div className="glass-card p-10 space-y-8 border-t-4 border-indigo-600 shadow-xl">
                                    <h3 className="text-xl font-black uppercase tracking-tighter flex items-center gap-3"><i data-lucide="shield" className="text-indigo-400"></i> Terminal keys</h3>
                                    <div className="p-4 bg-white/5 border border-white/5 rounded-xl space-y-2 text-center shadow-inner">
                                        <p className="text-xs text-slate-400 uppercase tracking-widest font-bold">STAFF: <span className="text-emerald-400 font-mono tracking-normal">{staffPass}</span></p>
                                        <p className="text-xs text-slate-400 uppercase tracking-widest font-bold">ADMIN: <span className="text-indigo-400 font-mono tracking-normal">{adminPass}</span></p>
                                    </div>
                                </div>
                                <div className="glass-card p-10 space-y-8 border-t-4 border-rose-600 shadow-xl text-center">
                                    <h3 className="text-xl font-black uppercase tracking-tighter flex items-center justify-center gap-3"><i data-lucide="database-zap" className="text-rose-400"></i> Cloud Project</h3>
                                    <button onClick={() => window.open('https://supabase.com/dashboard/project/uoajxfqciabzlpiqxvup/editor', '_blank')} className="w-full bg-slate-800 hover:bg-slate-700 py-4 rounded-xl font-bold uppercase text-[10px] tracking-widest transition-all shadow-lg border border-white/5">Supabase Console</button>
                                </div>
                            </div>
                        ) : null}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
        window.onload = () => { if (window.lucide) window.lucide.createIcons(); };
    </script>
</body>
</html>
